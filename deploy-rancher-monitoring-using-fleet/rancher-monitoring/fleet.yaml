defaultNamespace: cattle-monitoring-system
targetCustomizations:
- name: EKS-Cluster-Monitoring
  helm:
    releaseName: rancher-monitoring
    values:
      storageClassName: ebs-sc
  diff:
  comparePatches:
    - apiVersion: admissionregistration.k8s.io/v1
      kind: MutatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks/0/failurePolicy"}
    - apiVersion: admissionregistration.k8s.io/v1
      kind: ValidatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks/0/failurePolicy"}
  clusterSelector:
    matchLabels:
      EKS: true

- name: AKS-Cluster-Monitoring
  helm:
    releaseName: rancher-monitoring
  diff:
  comparePatches:
    - apiVersion: admissionregistration.k8s.io/v1
      kind: MutatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks/0/failurePolicy"}
    - apiVersion: admissionregistration.k8s.io/v1
      kind: ValidatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks/0/failurePolicy"}
  clusterSelector:
    matchLabels:
      AKS: true
